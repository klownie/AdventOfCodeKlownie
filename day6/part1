# Experimental!
&fras "input"
⊜∘⊸≠@\n

Move ← (
  °¤⊚⊸[⊃(= @^|= @>|= @<|= @⌵)]
  ⨬(𝄐⌞⍜(⊙◌◌°$"_^_#_"⇌⊏⊙⍉|⊙◌⍜(⊣|">")𝄈↯@X⧻)⊸⊣
  | 𝄐⌞⍜(⊙◌◌°$"_>_#_"⊏|⊙◌⍜(⊣|"⌵")𝄈↯@X⧻)⊸⊡₁
  | 𝄐⌞⍜(⊙◌◌°$"_<_#_"⇌⊏|⊙◌⍜(⊣|"^")𝄈↯@X⧻)⊸⊡₁
  | 𝄐⌞⍜(⊙◌◌°$"_⌵_#_"⊏⊙⍉|⊙◌⍜(⊣|"<")𝄈↯@X⧻)⊸⊣
  ) ⊸⊢
  𝄐⍜(⊡|⊙◌@X) ⊸↘1
)

Complete ← (
  °¤⊚⊸[⊃(= @^|= @>|= @<|= @⌵)]
  ⨬(𝄐⌞⍜(◌°$"_^_"⇌⊏⊙⍉|𝄈↯@X⧻)⊸⊣
  | 𝄐⌞⍜(◌°$"_>_"⊏|𝄈↯@X⧻)⊸⊡₁
  | 𝄐⌞⍜(◌°$"_<_"⇌⊏|𝄈↯@X⧻)⊸⊡₁
  | 𝄐⌞⍜(◌°$"_⌵_"⊏⊙⍉|𝄈↯@X⧻)⊸⊣
  ) ⊸⊢
  𝄐⍜(⊡|⊙◌@X) ⊸↘1
)

⍢(Move|⍣(1◌Move|0))
Complete
=@X

# ▽⟜≡▽ 6 #
/+♭
